function Node(e){this.namespace=e.namespace||null,this.text=e.text,this._selfCloseTag=e.selfCloseTag,Object.defineProperties(this,{nodeType:{value:e.nodeType},nodeName:{value:1==e.nodeType?e.nodeName:"#text"},childNodes:{value:e.childNodes},firstChild:{get:function(){return this.childNodes[0]||null}},lastChild:{get:function(){return this.childNodes[this.childNodes.length-1]||null}},parentNode:{value:e.parentNode||null},attributes:{value:e.attributes||[]},innerHTML:{get:function(){for(var e,t="",n=0,s=this.childNodes.length;n<s;n++)t+=3===(e=this.childNodes[n]).nodeType?e.text:e.outerHTML;return t}},outerHTML:{get:function(){if(3!=this.nodeType){var e,t=(this.attributes.map(function(e){return e.name+(e.value?'="'+e.value+'"':"")})||[]).join(" ");e="<"+this.nodeName+(t?" "+t:"")+(this._selfCloseTag?"/":"")+">",this._selfCloseTag||(e+=(this._selfCloseTag?"":this.childNodes.map(function(e){return e.outerHTML})||[]).join(""),e+="</"+this.nodeName+">")}else e=this.textContent;return e}},textContent:{get:function(){return this.nodeType==Node.TEXT_NODE?this.text:this.childNodes.map(function(e){return e.textContent}).join("").replace(/\x20+/g," ")}}})}function searchElements(e,t,n){var s=[];if(n=!!n,3!==e.nodeType)for(var o=0,r=e.childNodes.length;o<r&&(3===e.childNodes[o].nodeType||!t(e.childNodes[o])||(s.push(e.childNodes[o]),!n));o++)s=s.concat(searchElements(e.childNodes[o],t));return n?s[0]:s}Node.prototype.getAttribute=function(e){for(var t=0,n=this.attributes.length;t<n;t++)if(this.attributes[t].name==e)return this.attributes[t].value;return null},Node.prototype.getElementsByTagName=function(e){return searchElements(this,function(t){return t.nodeName==e})},Node.prototype.getElementsByClassName=function(e){var t=new RegExp("^(.*?\\s)?"+e+"(\\s.*?)?$");return searchElements(this,function(e){return e.attributes.length&&t.test(e.getAttribute("class"))})},Node.prototype.getElementById=function(e){return searchElements(this,function(t){return t.attributes.length&&t.getAttribute("id")==e},!0)},Node.prototype.getElementsByName=function(e){return searchElements(this,function(t){return t.attributes.length&&t.getAttribute("name")==e})},Node.ELEMENT_NODE=1,Node.TEXT_NODE=3;var tagRegExp=/(<\/?[a-z][a-z0-9]*(?::[a-z][a-z0-9]*)?\s*(?:\s+[a-z0-9-_]+=(?:(?:'[\s\S]*?')|(?:"[\s\S]*?")))*\s*\/?>)|([^<]|<(?![a-z\/]))*/gi,attrRegExp=/\s[a-z0-9-_]+\b(\s*=\s*('|")[\s\S]*?\2)?/gi,splitAttrRegExp=/(\s[a-z0-9-_]+\b\s*)(?:=(\s*('|")[\s\S]*?\3))?/gi,startTagExp=/^<[a-z]/,selfCloseTagExp=/\/>$/,closeTagExp=/^<\//,nodeNameExp=/<\/?([a-z][a-z0-9]*)(?::([a-z][a-z0-9]*))?/i,attributeQuotesExp=/^('|")|('|")$/g,noClosingTagsExp=/^(?:area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/i;function findByRegExp(e,t,n){for(var s,o,r,a,i,l,u,p,d=[],h=0,g=e.match(tagRegExp),c=!1,m=null,f=0,E=g.length;f<E;f++)if(o=(p=g[f]).match(nodeNameExp),(s=t.test(p))&&!c&&(c=!0),c){if(startTagExp.test(p)){r=selfCloseTagExp.test(p)||noClosingTagsExp.test(o[1]),a=[];for(var N=0,x=(l=p.match(attrRegExp)||[]).length;N<x;N++)splitAttrRegExp.lastIndex=0,i=splitAttrRegExp.exec(l[N]),a.push({name:i[1].trim(),value:(i[2]||"").trim().replace(attributeQuotesExp,"")});(m&&m.childNodes||d).push(u=new Node({nodeType:1,nodeName:o[1],namespace:o[2],attributes:a,childNodes:[],parentNode:m,startTag:p,selfCloseTag:r})),h++,!n&&s&&m&&d.push(u),r?h--:m=u}else closeTagExp.test(p)?m.nodeName==o[1]&&(m=m.parentNode,h--):m.childNodes.push(new Node({nodeType:3,text:p,parentNode:m}));if(0==h&&(c=!1,m=null,n))break}return n?d[0]||null:d}function Dom(e){this.rawHTML=e}function DomParser(){}Dom.prototype.getElementsByClassName=function(e){var t=new RegExp("class=('|\")(.*?\\s)?"+e+"(\\s.*?)?\\1");return findByRegExp(this.rawHTML,t)},Dom.prototype.getElementsByTagName=function(e){var t=new RegExp("^<"+e,"i");return findByRegExp(this.rawHTML,t)},Dom.prototype.getElementById=function(e){var t=new RegExp("id=('|\")"+e+"\\1");return findByRegExp(this.rawHTML,t,!0)},Dom.prototype.getElementsByName=function(e){return this.getElementsByAttribute("name",e)},Dom.prototype.getElementsByAttribute=function(e,t){var n=new RegExp("\\s"+e+"=('|\")"+t+"\\1");return findByRegExp(this.rawHTML,n)},DomParser.prototype.parseFromString=function(e){return new Dom(e)};
